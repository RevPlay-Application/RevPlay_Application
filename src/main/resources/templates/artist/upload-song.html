<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <meta charset="UTF-8">
  <title>Upload Song - RevPlay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

<nav class="navbar px-4">
  <a th:href="@{/artist/dashboard}" class="navbar-brand fw-bold orange-text">
    ðŸŽµ REVPLAY - ARTIST
  </a>
</nav>

<div class="container py-5">

  <div class="card shadow-lg p-4 mx-auto" style="max-width:650px; border-radius:20px;">
    <h3 class="text-center mb-4 orange-text">Upload New Song</h3>

    <form th:action="@{/artist/song/create}"
          method="post"
          enctype="multipart/form-data">

      <!-- Song Title -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Song Title</label>
        <input type="text"
               name="title"
               class="form-control"
               placeholder="Enter song title"
               required>
      </div>

      <!-- Genre ENUM Dropdown -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Genre</label>
        <select name="genre" class="form-select" required>
          <option value="">Select Genre</option>
          <option th:each="g : ${T(com.revature.revplay.model.Genre).values()}"
                  th:value="${g}"
                  th:text="${g}">
          </option>
        </select>
      </div>

      <!-- Duration -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Duration (in seconds)</label>
        <input type="number"
               name="duration"
               class="form-control"
               placeholder="e.g. 210"
               required>
      </div>

      <!-- Release Date -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Release Date (Optional)</label>
        <input type="date"
               name="releaseDate"
               class="form-control">
      </div>

      <!-- Visibility -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Visibility</label>
        <select name="visibility" class="form-select" required>
          <option value="PUBLIC">Public</option>
          <option value="PRIVATE">Private</option>
        </select>
      </div>

      <!-- Album Select -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Assign to Album (Optional)</label>
        <select name="albumId" class="form-select">
          <option value="">Single (No Album)</option>
          <option th:each="album : ${albums}"
                  th:value="${album.albumId}"
                  th:text="${album.albumName}">
          </option>
        </select>
      </div>

      <!-- Audio File -->
      <div class="mb-4">
        <label class="form-label fw-semibold">MP3 Audio File</label>
        <input type="file"
               name="audioFile"
               class="form-control"
               accept="audio/mpeg"
               required>
      </div>

      <!-- Buttons -->
      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-orange">
          Upload Song
        </button>

        <a th:href="@{/artist/dashboard}"
           class="btn btn-outline-secondary">
          Cancel
        </a>
      </div>

    </form>
  </div>

</div>

</body>
</html>